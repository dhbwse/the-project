% !TEX root = dokumentation.tex
\section{Implementierung}\label{sec:impl}
In diesem Kapitel wird die konkrete Entwicklung des Spieles beschrieben. Dabei werden sowohl die verschiedenen Prototypen betrachtet, wichtige Design-Entscheidungen offen gelegt und die technischen Hintergründe erläutert.
\subsection{Prototypeing}
	Als Basis der Implementierung wird ein in Unity vorhandenes Beispiel verwendet\footnote{<TODO:paket nennen>}, welches im Lauf der Entwicklung entsprechend angepasst und erweitert wird. Zu diesem Beispiel gehört ein vereinfachtes Modell eines Autos, eine Kamera, welche sich hinter dem Fahrzeug befindet und einfache Nutzersteuerung für die Tastatur.
	In diesem Abschnitt der Studienarbeit sollen nun die Prototypen in chronologischer Reihenfolge dargestellt werden, um die Entwicklung des Spiels zu verdeutlichen. Alle Stadien des Spiels werden sowohl von den Entwicklern, wie auch ausgewählten Testspielern geprüft. Das erhaltene Feedback bietet somit die maßgebliche Grundlage für die Änderungen zwischen zwei Prototypen. Eine ausführliche Darlegung der Design-Entscheidungen befindet sich im folgenden Kapitel.
	\begin{enumerate}[label=Prototyp \arabic*]
		\item{ Für den Beginn der Entwicklung wird zunächst eine Kopie des genannten Beispieles angefertigt. Auf Basis der grundsätzlichen Spielidee wird die Kamera oberhalb des Fahrzeugs positioniert, um eine Top-Down Ansicht zu erhalten. Durch die initiale Positionierung der Kamera hinter dem Fahrzeug, rotiert die Kamera mit dem Fahrzeug. Zwecks besserer Übersichtlichkeit wird dieses Drehverhalten unterbunden und die Kamera lediglich relativ zur Position, jedoch nicht der Rotation des Fahrzeugs erweitert. Um das Spiel auf mobilen Endgeräten spielen zu können, ist eine zunächst vereinfachte Steuerung über einen Joystick und zwei Buttons (Vorwärts und Rückwärts) nötig. Die Eingaben des Joysticks werden relativ zur Rotation des Fahrzeugs verarbeitet, somit führt beispielsweise ein \enquote{nach links ziehen} des Joysticks zu einer Linkskurve des Fahrzeugs. Die vertikale Achse des Joysticks findet in diesem Prototyp keine Verwendung, weshalb ein Slider als Alternative zum Joystick evaluiert wird. }
		\item{ Für den zweiten Prototyp steht die Weiterentwicklung der Steuerung im Fokus. Dabei kann zunächst die Idee eines Sliders zur Lenkung des Fahrzeugs verworfen werden, da für eine neue Umsetzung der Steuerung sowohl die horizontale, wie auch die vertikale Achse benötigt werden. Anschließend wird die Steuerung nicht relativ zur Ausrichtung des Fahrzeugs, sondern relativ zur Blickrichtung der Kamera implementiert. Somit schlägt das Fahrzeug immer die gleiche Richtung ein, wie der Joystick abhängig von seinem Mittelpunkt bewegt wird.}
		\item{ Auch der dritte Prototyp des Spiels hat die grundsätzliche Steuerung zum Ziel. Auf Basis mehrerer erhaltenen Kritiken soll das Verhalten des \enquote{Rückwärts-Pedals} verändert werden. Hauptkritikpunkt in diesem Fall ist, dass ein reales Fahrzeug kein eigens Pedal für den Rückwärtsgang besitzt. Mit einer Veränderung dieses Steuerungselements verändert sich das Rückwärts-Pedal zu einem Bremspedal. Ein Betätigen dieser Schaltfläche reduziert die Fahrtgeschwindigkeit bis zum Stillstand. Dem somit fehlende Rückwärtsgang wird zunächst keine Beachtung geschenkt, dies soll mit einem späteren Prototyp implementiert werden.}
		\item{ Um die Optik des Spiels aufzuwerten, steht für den vierten Prototyp die Benutzeroberfläche im Fokus. Dabei werden sowohl für alle Buttons, wie auch für den Joystick eigene Grafiken erstellt. Alle Grafiken der Benutzerobefläche folgen dem gleichen Konzept und vermitteln somit ein wohl überlegtes Gesamtbild. Für die Gestaltung der Buttons für Gas und Bremse wird eine Evaluation durchgeführt. Der vorläufige Gewinner dieser Evaluation sind zwei Tachos, wobei ein Tacho einen hohen Wert und ein Tacho einen niedrigen Wert anzeigt. }
		\item{ Mit dem fünften Prototyp kann der Rückwärtsgang implementiert werden. Ein \enquote{nach Hinten ziehen} des Joysticks führt dabei zu einer Änderung der Fahrtrichtung des Fahrzeugs. Bei der Beschleunigung fährt das Fahrzeug somit rückwärts. Auch die Steuerung wird in diesem Fall so invertiert, dass das Fahrzeug weiterhin der Ausrichtung des Joysticks folgt. Weiterhin wird während dieses Prototyps ein Anzeigen der Aufgaben möglich gemacht. Das Durchfahren eines bestimmten Bereichs führt dazu, dass auf dem Bildschirm eine zufällige Aufgabe aus der Liste aller möglichen Aufgaben gewählt wird. Die möglichen Lösungen dieser Aufgabe werden zu diesem Zeitpunkt noch nicht angezeigt. Zusätzlich zu den Änderungen an der Spielmechanik existiert seit diesem Prototyp eine Minimap, welche dem Spieler den kommenden Streckenverlauf transparent auf dem Bildschirm anzeigt. }
		\item{ Die Finalisierung der Aufgaben innerhalb der Level ist der Kernaspekt des sechsten Prototyps. Dabei werden zunächst neben der Aufgabe auch zwei mögliche Lösungen dieser Aufgabe angezeigt. Die Lösungen der Aufgaben sind entweder in blau oder in rot eingefärbt, welche Farbe für die richtige Lösung verwendet wird ist dabei zufällig gewählt. In den einzelnen Rennen werden den existierenden Weggabelungen Pfeile hinzugefügt, welche in den Farben der Aufgaben eingefärbt sind. Somit sieht der Spieler unmittelbar, welcher Weg zu welcher möglichen Lösung gehört. Zudem wird bei Durchfahren der Wege ausgewertet, ob die Aufgabe korrekt oder inkorrekt gelöst ist. }
		\item{ Die siebte Version des Spiels stellt die Fertigstellung der Fahrzeugsteuerung dar. Der Wechsel zwischen dem Vorwärtsgang und dem Rückwärtsgang soll nur möglich sein, wenn das Fahrzeug still steht. Durch diese Änderung führt ein \enquote{Verreißen} des Joysticks lediglich zu einer Richtungsänderung, jedoch nicht mehr zum apprupten Abbremsen des Fahrzeugs. Da die generelle Steuerung als \enquote{zu empfindlich} kritisiert wird, wird eine Lenkungsverzögerung implementiert. An diesem Punkt erreicht die Steuerung den finalen Status.}
		\item{ Um eine globale Verfügbarkeit der Spieler-Daten über ein Schließen der App heraus zu gewährleisten, wird eine Speicherung des Spielstands implementiert. In diesem Spielstand ist gespeichert, welche Rennen ein Nutzer bereits abgeschlossen hat, welche Finalrennen bereits freigespielt sind, wieviele Münzen der Spieler besitzt und wieviele Aufgaben bereits erfolgreich gelöst sind. Über die Anzahl der Aufgaben ist eine Statistik über den Lernerfolg des Spielers möglich, wird jedoch in diesem Fall nicht realisiert. Weiterhin erhalten die einzelnen Rennen eine Auswertung darüber, ob ein Rennen gewonnen ist, oder nicht. Die genauen Kriterien für das Gewinnen eines Rennens befinden sich im folgenden Kapitel. Durch die nun verfügbaren Informationen über die Anzahl an Münzen ist die Einführung des Ingame-Shops möglich. Dieser ist als eigenes Level realisiert und über Startmenü des Spiels erreichbar.}
		\item{ Damit das Spiel auch multilingual nutzbar ist, sollen jegliche Texte durch Symbole ersetzt werden. Weitere Symbole, welche dem gleichen Konzept wie bisherige Buttons folgen werden entworfen und umgesetzt. Mit dem Einbau dieser Symbole im Spiel sind jegliche Texte im Spiel nicht mehr nötig. Somit ist das Spiel grundsätzlich universal einsetzbar, die Sprache der Spieler ist irrelevant. Um die Dynamik und das Spielgefühl zu verbessern, werden dem Spiel verschiedene Töne hinzugefügt. So wird beispielsweise ein korrektes Lösen einer Aufgabe mit Jubel belohnt. Eine Kollision mit Objekten der Karte verursacht nun ebenso Geräusche. Zusätzlich erhält das Spiel Hintergrundtöne, welche die Spielwelt lebendiger wirken lassen. Mit der Fertigstellung dieses Prototyps ist die gewünschte Grundfunktionalität erreicht. Alle weiteren Schritte in der Entwicklung führen zu weiteren Levelpacks und spielbaren Leveln.}
	\end{enumerate}
\subsection{Design-Entscheidungen in der Entwicklung}
	\subsubsection{Automatisch Gas vs Gaspedal}
	\subsubsection{Steuerung relativ zu Kamera vs Steuerung relativ zu Fahrzeug}
	Die Wahl der Verankerung der Steuerung kann gravierende Änderungen an dem Spielerlebnis des Nutzers haben. Aus diesem Grund ist diese Entscheidung sehr wichtig und muss genau analysiert werden.
	Wird die Steuerung relativ zur Ausrichtung der Kamera implementiert, so reagiert das Fahrzeug jederzeit mit einer Rotation in Richtung der Ausrichtung des Joysticks. Zieht der Anwender den Joystick beispielsweise nach Rechts, so bewegt sich das Fahrzeug jederzeit in Richtung des rechten Bildschirmrands. Bei der Steuerung relativ zur Ausrichtung des Fahrzeugs ist diese Kontinuität nicht gegeben. Fährt das Fahrzeug aus Sicht des Nutzers nach oben, so führt ein nach Rechts ziehen des Joysticks zu einer Rechtskurve und somit einer Richtungsänderung nach rechts.
	Fährt das Fahrzeug jedoch aus der Sicht des Nutzers nach unten, so führt ein nach Rechts ziehen des Joysticks zwar ebenfalls zu einer Rechtskurve, jedoch entspricht dies auf Basis der vorherigen Fahrtrichtung einer Änderung der Fahrtrichtung nach links.
	Bei der Steuerung relativ zur Position des Fahrzeugs bedeutet dies, dass stetig Transferleistungen erbracht werden müssen. Der Spieler muss sich jederzeit überlegen, wie das Fahrzeug seine Eingabe verarbeitet. Da dies bei einer Steuerung relativ zur Kamera nicht der Fall ist, kann diese Möglichkeit allgemein als \enquote{einfacher} gewertet werden. Da die Zielgruppe des Spiels vor Allem Kinder im Grundschulalter sind, ist die einfachere Steuerung zu bevorzugen. Ein weiterer Pluspunkt der Steuerung relativ zur Kamera ist die Präzision. Da das Fahrzeug jederzeit die Fahrtrichtung des Joysticks übernimmt, kann das Fahrzeug sehr präzise gesteuert werden.
	\subsubsection{Bremspedal vs Rückwärtspedal}
	\subsubsection{Auswertung eines Rennens}
\subsection{Entwicklung}
	\subsubsection{Level Design}
		Wie bereits in \ref{par:streckendesign} und \ref{par:streckendesign2} beschrieben sollen die Rennstrecken schlauchartig...
	\subsubsection{UI Design}
	\subsubsection{Physik und Steuerung}
	\subsubsection{}
\subsection{Implementation in Game-Engine X}
\subsection{Class Diagram, DB}
\subsection{Wie wurden gewisse Dinge umgesetzt}
\subsection{Integration in Lernplattform}
